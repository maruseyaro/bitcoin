import { useState } from "react";
import { LineChart, CartesianGrid, Line } from "recharts";

export default function PriceGraph() {
  const [viewMode, setViewMode] = useState<ViewMode>("1mo");

  const data = historyData.map(([timestamp, amountInMinorUnits]) => ({
    timestamp,
    price: amountInMinorUnits / 100,
  }));

  const createHandleViewModeButtonClick = (viewMode: ViewMode) => () => {
    setViewMode(viewMode);
  };

  return (
    <section>
      <h3>{viewMode}</h3>

      <LineChart width={400} height={400} data={data}>
        <CartesianGrid stroke="#f5f5f5" />
        <Line
          type="monotone"
          dataKey="timestamp"
          stroke="#ff7300"
          yAxisId={0}
        />
        <Line type="monotone" dataKey="price" stroke="#387908" yAxisId={1} />
      </LineChart>

      <ul>
        <li>
          <button
            type="button"
            onClick={createHandleViewModeButtonClick("24h")}
          >
            24 hour
          </button>
        </li>
        <li>
          <button type="button" onClick={createHandleViewModeButtonClick("7d")}>
            7 days
          </button>
        </li>
        <li>
          <button
            type="button"
            onClick={createHandleViewModeButtonClick("1mo")}
          >
            1 month
          </button>
        </li>
      </ul>
    </section>
  );
}

type ViewMode = "24h" | "7d" | "1mo";

type History = Array<[timestamp: string, amountInMinorUnits: number]>;

const historyData: History = [
  ["2022-01-29T00:00:00.000Z", 3776348],
  ["2022-01-28T00:00:00.000Z", 3723002],
  ["2022-01-27T00:00:00.000Z", 3684022],
  ["2022-01-26T00:00:00.000Z", 3695292],
  ["2022-01-25T00:00:00.000Z", 3664700],
  ["2022-01-24T00:00:00.000Z", 3623543],
  ["2022-01-23T00:00:00.000Z", 3507578],
  ["2022-01-22T00:00:00.000Z", 3647715],
  ["2022-01-21T00:00:00.000Z", 4067418],
  ["2022-01-20T00:00:00.000Z", 4169030],
  ["2022-01-19T00:00:00.000Z", 4236567],
  ["2022-01-18T00:00:00.000Z", 4222692],
  ["2022-01-17T00:00:00.000Z", 4311563],
  ["2022-01-16T00:00:00.000Z", 4309065],
  ["2022-01-15T00:00:00.000Z", 4308824],
  ["2022-01-14T00:00:00.000Z", 4254642],
  ["2022-01-13T00:00:00.000Z", 4394340],
  ["2022-01-12T00:00:00.000Z", 4277068],
  ["2022-01-11T00:00:00.000Z", 4181824],
  ["2022-01-10T00:00:00.000Z", 4186160],
  ["2022-01-09T00:00:00.000Z", 4164812],
  ["2022-01-08T00:00:00.000Z", 4157238],
  ["2022-01-07T00:00:00.000Z", 4309315],
  ["2022-01-06T00:00:00.000Z", 4342508],
  ["2022-01-05T00:00:00.000Z", 4583258],
  ["2022-01-04T00:00:00.000Z", 4644722],
  ["2022-01-03T00:00:00.000Z", 4729384],
  ["2022-01-02T00:00:00.000Z", 4771794],
  ["2022-01-01T00:00:00.000Z", 4625453],
  ["2021-12-31T00:00:00.000Z", 4715921],
  ["2021-12-30T00:00:00.000Z", 4644973],
  ["2021-12-29T00:00:00.000Z", 4755721],
  ["2021-12-28T00:00:00.000Z", 5067235],
  ["2021-12-27T00:00:00.000Z", 5080909],
  ["2021-12-26T00:00:00.000Z", 5043459],
  ["2021-12-25T00:00:00.000Z", 5082379],
  ["2021-12-24T00:00:00.000Z", 5082745],
  ["2021-12-23T00:00:00.000Z", 4860662],
  ["2021-12-22T00:00:00.000Z", 4892253],
  ["2021-12-21T00:00:00.000Z", 4693144],
  ["2021-12-20T00:00:00.000Z", 4665697],
  ["2021-12-19T00:00:00.000Z", 4685627],
  ["2021-12-18T00:00:00.000Z", 4615374],
  ["2021-12-17T00:00:00.000Z", 4765107],
  ["2021-12-16T00:00:00.000Z", 4887637],
  ["2021-12-15T00:00:00.000Z", 4837164],
  ["2021-12-14T00:00:00.000Z", 4669180],
  ["2021-12-13T00:00:00.000Z", 5011800],
  ["2021-12-12T00:00:00.000Z", 4940181],
  ["2021-12-11T00:00:00.000Z", 4718896],
  ["2021-12-10T00:00:00.000Z", 4761963],
  ["2021-12-09T00:00:00.000Z", 5056637],
  ["2021-12-08T00:00:00.000Z", 5060980],
  ["2021-12-07T00:00:00.000Z", 5056992],
  ["2021-12-06T00:00:00.000Z", 4941246],
  ["2021-12-05T00:00:00.000Z", 4931816],
  ["2021-12-04T00:00:00.000Z", 5367630],
  ["2021-12-03T00:00:00.000Z", 5652819],
  ["2021-12-02T00:00:00.000Z", 5720163],
  ["2021-12-01T00:00:00.000Z", 5697545],
  ["2021-11-30T00:00:00.000Z", 5780829],
  ["2021-11-29T00:00:00.000Z", 5734393],
  ["2021-11-28T00:00:00.000Z", 5475594],
  ["2021-11-27T00:00:00.000Z", 5376613],
  ["2021-11-26T00:00:00.000Z", 5900926],
  ["2021-11-25T00:00:00.000Z", 5721855],
  ["2021-11-24T00:00:00.000Z", 5759420],
  ["2021-11-23T00:00:00.000Z", 5629986],
  ["2021-11-22T00:00:00.000Z", 5865648],
  ["2021-11-21T00:00:00.000Z", 5975509],
  ["2021-11-20T00:00:00.000Z", 5813009],
  ["2021-11-19T00:00:00.000Z", 5692437],
  ["2021-11-18T00:00:00.000Z", 6033918],
  ["2021-11-17T00:00:00.000Z", 6006388],
  ["2021-11-16T00:00:00.000Z", 6346713],
  ["2021-11-15T00:00:00.000Z", 6561474],
  ["2021-11-14T00:00:00.000Z", 6443715],
  ["2021-11-13T00:00:00.000Z", 6421255],
  ["2021-11-12T00:00:00.000Z", 6481072],
  ["2021-11-11T00:00:00.000Z", 6483858],
  ["2021-11-10T00:00:00.000Z", 6698411],
  ["2021-11-09T00:00:00.000Z", 6750355],
  ["2021-11-08T00:00:00.000Z", 6335725],
  ["2021-11-07T00:00:00.000Z", 6151941],
  ["2021-11-06T00:00:00.000Z", 6099942],
  ["2021-11-05T00:00:00.000Z", 6145400],
  ["2021-11-04T00:00:00.000Z", 6292884],
  ["2021-11-03T00:00:00.000Z", 6328187],
  ["2021-11-02T00:00:00.000Z", 6092741],
  ["2021-11-01T00:00:00.000Z", 6134842],
  ["2021-10-31T00:00:00.000Z", 6196230],
  ["2021-10-30T00:00:00.000Z", 6224367],
  ["2021-10-29T00:00:00.000Z", 6061468],
  ["2021-10-28T00:00:00.000Z", 5854066],
  ["2021-10-27T00:00:00.000Z", 6029572],
  ["2021-10-26T00:00:00.000Z", 6304868],
  ["2021-10-25T00:00:00.000Z", 6083413],
  ["2021-10-24T00:00:00.000Z", 6132965],
  ["2021-10-23T00:00:00.000Z", 6067006],
  ["2021-10-22T00:00:00.000Z", 6233021],
  ["2021-10-21T00:00:00.000Z", 6595026],
  ["2021-10-20T00:00:00.000Z", 6425048],
  ["2021-10-19T00:00:00.000Z", 6201626],
  ["2021-10-18T00:00:00.000Z", 6153799],
  ["2021-10-17T00:00:00.000Z", 6085177],
  ["2021-10-16T00:00:00.000Z", 6161902],
  ["2021-10-15T00:00:00.000Z", 5732388],
  ["2021-10-14T00:00:00.000Z", 5741472],
  ["2021-10-13T00:00:00.000Z", 5601313],
  ["2021-10-12T00:00:00.000Z", 5741904],
  ["2021-10-11T00:00:00.000Z", 5468739],
  ["2021-10-10T00:00:00.000Z", 5493904],
  ["2021-10-09T00:00:00.000Z", 5391612],
  ["2021-10-08T00:00:00.000Z", 5381251],
  ["2021-10-07T00:00:00.000Z", 5530643],
  ["2021-10-06T00:00:00.000Z", 5145418],
  ["2021-10-05T00:00:00.000Z", 4923566],
  ["2021-10-04T00:00:00.000Z", 4821696],
  ["2021-10-03T00:00:00.000Z", 4770364],
  ["2021-10-02T00:00:00.000Z", 4815719],
  ["2021-10-01T00:00:00.000Z", 4383652],
  ["2021-09-30T00:00:00.000Z", 4152048],
  ["2021-09-29T00:00:00.000Z", 4106626],
  ["2021-09-28T00:00:00.000Z", 4217533],
  ["2021-09-27T00:00:00.000Z", 4317616],
  ["2021-09-26T00:00:00.000Z", 4270778],
  ["2021-09-25T00:00:00.000Z", 4282995],
  ["2021-09-24T00:00:00.000Z", 4490132],
  ["2021-09-23T00:00:00.000Z", 4355901],
  ["2021-09-22T00:00:00.000Z", 4074847],
  ["2021-09-21T00:00:00.000Z", 4293491],
  ["2021-09-20T00:00:00.000Z", 4724207],
  ["2021-09-19T00:00:00.000Z", 4831363],
  ["2021-09-18T00:00:00.000Z", 4728271],
  ["2021-09-17T00:00:00.000Z", 4775978],
  ["2021-09-16T00:00:00.000Z", 4813839],
  ["2021-09-15T00:00:00.000Z", 4709384],
  ["2021-09-14T00:00:00.000Z", 4495700],
  ["2021-09-13T00:00:00.000Z", 4607516],
  ["2021-09-12T00:00:00.000Z", 4516867],
  ["2021-09-11T00:00:00.000Z", 4486016],
  ["2021-09-10T00:00:00.000Z", 4639964],
  ["2021-09-09T00:00:00.000Z", 4607717],
  ["2021-09-08T00:00:00.000Z", 4677276],
  ["2021-09-07T00:00:00.000Z", 5269484],
  ["2021-09-06T00:00:00.000Z", 5179593],
  ["2021-09-05T00:00:00.000Z", 4993072],
  ["2021-09-04T00:00:00.000Z", 4998541],
  ["2021-09-03T00:00:00.000Z", 4928892],
  ["2021-09-02T00:00:00.000Z", 4884261],
  ["2021-09-01T00:00:00.000Z", 4712401],
  ["2021-08-31T00:00:00.000Z", 4699887],
  ["2021-08-30T00:00:00.000Z", 4879041],
  ["2021-08-29T00:00:00.000Z", 4893397],
  ["2021-08-28T00:00:00.000Z", 4909974],
  ["2021-08-27T00:00:00.000Z", 4687090],
  ["2021-08-26T00:00:00.000Z", 4899824],
  ["2021-08-25T00:00:00.000Z", 4774359],
  ["2021-08-24T00:00:00.000Z", 4952576],
  ["2021-08-23T00:00:00.000Z", 4932408],
  ["2021-08-22T00:00:00.000Z", 4887765],
  ["2021-08-21T00:00:00.000Z", 4931438],
  ["2021-08-20T00:00:00.000Z", 4675751],
  ["2021-08-19T00:00:00.000Z", 4476758],
  ["2021-08-18T00:00:00.000Z", 4471339],
  ["2021-08-17T00:00:00.000Z", 4592174],
  ["2021-08-16T00:00:00.000Z", 4706144],
  ["2021-08-15T00:00:00.000Z", 4711691],
  ["2021-08-14T00:00:00.000Z", 4780851],
  ["2021-08-13T00:00:00.000Z", 4446754],
  ["2021-08-12T00:00:00.000Z", 4558159],
  ["2021-08-11T00:00:00.000Z", 4559375],
  ["2021-08-10T00:00:00.000Z", 4633026],
  ["2021-08-09T00:00:00.000Z", 4380884],
  ["2021-08-08T00:00:00.000Z", 4457382],
  ["2021-08-07T00:00:00.000Z", 4282053],
  ["2021-08-06T00:00:00.000Z", 4086841],
  ["2021-08-05T00:00:00.000Z", 3973481],
  ["2021-08-04T00:00:00.000Z", 3816932],
  ["2021-08-03T00:00:00.000Z", 3909921],
  ["2021-08-02T00:00:00.000Z", 3990451],
  ["2021-08-01T00:00:00.000Z", 4145174],
  ["2021-07-31T00:00:00.000Z", 4214182],
  ["2021-07-30T00:00:00.000Z", 4000701],
  ["2021-07-29T00:00:00.000Z", 3999757],
];
